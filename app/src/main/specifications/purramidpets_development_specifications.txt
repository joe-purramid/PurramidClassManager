# Purramid Pets Application Development Specifications
Purramid Pets is a classroom management tool that displays a virtual pet that students can adopt. Its actions and features help regulate studenet behavior.

## **Technical Implementation Notes**
- Service/Activity type: Foreground Service (PurrPetsService) + Settings Activity (PurrPetsActivity)
- Free-form window support: Yes
- Multi-window support: No
- Requires permissions:
  - SYSTEM_ALERT_WINDOW (for overlay - requested on first launch)
  - FOREGROUND_SERVICE (automatic)
  - POST_NOTIFICATIONS (Android 13+ - requested when creating first window)
  - INTERNET (music access for Alarm)
  - WAKE_LOCK
  - RECEIVE_BOOT_COMPLETED
- Database entities:
  - 
- Key dependencies:
  - ViewModel: ClockViewModel (time state, settings)
  - DAO: 
	- 
  - Repository: 
  - Services: 
  - Special: 
  - Shared: 


## RUNTIME EVENTS
1. On app launch load saved user preferences 
2. On app focus, query system for an available microphone
3. When the active pet changes, change the new active pet to user preferences.
4. When app size changes, save the new size to user preferences.
5. When app position changes, save the new position to user preferences.
6. When the settings menu is closed, save user preferences.
	6.1. Active pet
	6.2. Pet data
		6.2.1. Pet names
		6.2.2. Pet types
		6.2.3. Points assigned to each pet
	6.3. Settings data for each pet
		6.3.1. Mode
		6.3.2. Responsive Mode decible values
		6.3.3. Responsive Mode animations
		6.3.4. Background image
		6.3.5. Music on/off state
		6.3.6. Music custom URLs
		6.3.7. Marathon on/off state
		6.3.8. Universal value checkbox checked/unchecked state
	6.4. All user-created alarms
		6.4.1. Alarms are saved whether they are active or not.
		6.4.2. Active alarms remain active on next app launch.


## Default Values
7. If there are no user preferences saved, use the following values:
	7.1. Window size: 300 px by 300 px
	7.2. Screen position: Top right corner of the screen
		7.2.1. Offset by 50 px from the top and right edges
		7.2.2. Top left corner of the screen for right-to-left languages like Arabic
	7.3. Background image: Blur
	7.4. Music on/off state: Off
	7.5. Marathon on/off state: Off
	7.6. Universal value checkbox state: Unchecked


## **USER INTERFACE**

### TITLE BAR
8. A bar runs the width of the app window
	8.1. Background color: E8D5B7
	8.2. Height is 10% of the window height with the following limits:
		8.3.1. The minimum height is 20 px
		8.3.2. The maximum height is 50 px
9. A drag anchor (ic_drag.xml) appears on the left end of the bar.
10. A marquee appears in the center of the bar.
	10.1. The marquee is a rectangle with rounded corners
		10.1.1. Its background color is black.
	10.2. Marquee text is 
		10.2.1 bold font
		10.2.1. the string "Purramid Pets" if no pet has been created.
			10.2.1.1. The word Purramid is never translated
		10.2.2. the name of the active pet if a pet has been created.
	10.3. To the right of the marquee text is a drop-down arrow (ic_arrow_drop_down.xml)
		10.3.1. Wehn the marquee is activated, the icon changes to ic_arrow_drop_up.xml
11. A settings button (ic_settings.xml) appears on the right end of the bar.
12. A full-screen button (ic_full_screen.xml) appears to the left of the settings button
	12.1. When the full-screen button is activated, the icon changes to ic_windowed_screen.xml
13. A minimize button (ic_minimize.xml) appears to the left of the full-screen button

### PET SPACE
14. This area is reserved for the pet and its animations
	14.1. Height is 73% of the window height with the following exceptions
		14.1.1. If the title bar reaches its minimum or maximum limits, any difference in height is offset by changing the height of the pet space.
		14.1.2. If the action buttons reach their minimum or maximum limits, any difference in height is offset by changing the height of the pet space.
		14.1.3. 
		14.1.4. It is possible for two or all three scenarios to be in effect at once. The title bar and the action buttons may reach their limits and the music navigation bar may be visible, in which case the pet space height adjusts to accommodate all.
	14.2. If the user assigns a background, that image resizes with the window
		14.2.1. If the background image dimensions do not match the pet space dimensions, the image is zoomed in so that all space is filled.
			14.2.1.1. It is acceptable that some of the image will be lost
			14.2.1.2. Zoom is anchored to the center of the background
			14.2.1.3. For example, if the window size is changed so that the background width does not fill the entirety of the pet space, the background image zooms in to fill the space. This will cause some of the image top and bottom to be lost.
			
### ACTION BUTTONS
15. Below the pet space and centered in the window are action buttons
	15.1. Height for the action button area is 17% of the window height with the following limits:
		15.1.1. The minimum height is 50 px
		15.1.2. The maximum height is 80 px
	15.2. A Redeem button (ic_redeem.xml) appears on the left
	15.3. A Minus button appears to the right of the redeem button
		15.3.1. This icon is 60% the size of the Redeem button
	15.4. A circle with the number of current points appears to the right of the minus button
	15.5. A Plus button appears to the right of the current points circle
		15.5.1. This icon is 60% the size of the Redeem button
		
### MUSIC NAVIGATION BAR
16. If Music is toggled on in the settings, a menu bar appears beneath the action buttons.
	16.1. Its height is 25 px regardless of the size of the app window
	16.2. Background color: E8D5B7
	16.3. An equalizer image appears on the far left of the menu bar
		16.3.1. This is three adjacent vertical bars
		16.3.2. When Play is active, the bars animate in a randomized up and down-motion to emulate an audio equalizer's sound levels displayed
		16.3.3. When Play is inactive, the bars are not present. A single horizontal base line is present.
	16.4. The title of the selected music appears centered in the menu bar
		16.4.1. Song title should be pulled from custom music linked to online
		16.4.2. If a song title is unavailable, three musical notes appear instead
	16.5. A reset button appears on the far right of the menu bar.
	16.6. A pause button appears to the left of the reset button.
	16.7. A play button appears to the left of the pause button.


## **USER EXPERIENCE**

### TITLE BAR
17. When a user press-and-holds the drag anchor:
	17.1. The icon changes to an active state
	17.2. The user can drag the window anywhere on the screen.
		17.2.1. The window can never been dragged off the screen
		17.2.2. When any edge of the window reaches any edge of the screen, no more movement in that direction is possible
18. When a user taps the marquee text or the drop-down arrow:
	18.1. The drop-down arrow rotates with a smooth animation to its active state
	18.2. A drop-down menu extends from the marquee with a smooth animation
	18.3. A list of pet names are displayed in the menu
		18.3.1. The active pet name continues to appear in the marquee
		18.3.2. The remaining pet names appear in the menu in alphanumeric order
	18.4. Tapping a pet name:
		18.4.1. Sets that pet as the active pet
			18.4.1.1. If the name tapped is already the active pet, that pet remains active and the following steps still occur
		18.4.2. Closes the drop-down menu with a smooth animation
		18.4.3. Returns the drop-down arrow to its default state with a smooth animation
	18.5. Tapping outside the bounds of the marquee drop-down
		18.5.1. Closes the drop-down menu with a smooth animation
		18.5.2. Returns the drop-down arrow to its default state with a smooth animation
	18.6. If no pets have been created, the drop-down menu cannot be opened.
19. When a user taps the minimize button:
	19.1. the icon activates for the duration of the onTouch event
	19.2. the app is closed
		19.2.1. This is not a Destroy event
		19.2.2. If the user taps the app icon to launch the app again, it returns the app to its previous state before being minimized
		19.2.3. Any background services (e.g., an alarm or music) continues to run while minimized
20. When a user taps the full-screen button:
	20.1. the icon activates for the duration of the onTouch event
	20.2. the icon changes to its active state (ic_windowed_screen.xml)
	20.3. the app window fills the entire screen
		20.3.1. all rules for resizing apply in this scenario as well
21. When a user taps the windowed-screen button:
	21.1. the icon activates for the duration of the onTouch event
	21.2. the icon changees to is default state (ic_full_screen.xm)
	21.3. the app window returns to the size it was before being made full-screen.
		21.3.1. If size data has been lost, return to default size
	21.4. the app window returns to the screen position it was in before being made full-screen
		21.4.1. If position data has been lost, return to the default location
22. When a user taps the settings button:
	22.1. the icon activates
	22.2. a settings window opens at the center of the screen with an explosion animation
		22.2.1 the settings window is 400 px wide
		22.2.2. determine the necessary window height based on the settings listed below so that all settings buttons are the same size

#### SETTINGS WINDOW
23. The settings window includes the following elements:
	23.1. A header string "SETTINGS" centered at the top of the window
	23.2. A close button (ic_close.xml) at the top right of the window that closes the settings window
		23.2.1. The window closes with an explosion animation
		23.2.2. The user can also close the settings window by tapping anywhere outside of the settings window
	23.3. A rule (line) that separates the header from the menu buttons.
		23.3.1. Its width is the width of the window minus 10 px on each side
		23.3.2. The rule does not connect with the window border
	23.4. Rectangular buttons, each with a string title and an icon

##### MODE
		23.4.1. Mode
			23.4.1.1. To the right of the string is an ear icon (ic_listen.xml)
				23.4.1.1.1. If the mode is Rewards, the icon is color 757575
				23.4.1.1.2. If the mode is Responsive, the icon is color 2196F3
			23.4.1.2. When the user taps the button a Mode Selection menu replaces the settings menu with a slide animation
			23.4.1.3 The Mode Selection menu includes the following elements: 
				23.4.1.1. A back button (ic_back.xml) that returns the user to the settings window with a slide animation
				23.4.1.2. A header string "MODE SELECTION" centered at the top of the window
				23.4.1.3. A close button (ic_close_xml) at the top right of the window that closes the Mode Selection window AND the Settings window
					23.4.1.3.1. If a user taps the screen outside of the Mode Selection window, both the Mode Selection and Settings windows close
				23.4.1.4. A rule (line) that separates the header from the menu buttons.
					23.4.1.4.1. Its width is the width of the window minus 10 px on each side
					23.4.1.4.2. The rule does not connect with the window border
				23.4.1.5. A button with the string "REWARDS"
				23.4.1.6. An italicized string in smaller font size that says, "Manually assign class points that can be redeemed for pet rewards."
				23.4.1.7. A button with the string "RESPONSIVE"
					23.4.1.8. This option is inactive (grayed out) and unselectable if the app does not detect an available microphone
				23.4.1.8. An italicized string in smaller font size that says, "Sounded measured by a connected microphone causes pet reactions based on the decibel level in the room."

##### RESPONSIVE MODE RULES
		23.4.2. Resposive Mode Rules
			23.4.2.1. This setting option only appears if Mode is set to "Responsive"
			23.4.2.2. To the right of the string is an edit button (ic_edit.xml)
			23.4.2.3. When the user taps the button, a new window replaces the settings menu with a slide animation
			23.4.2.4. The Responsive Mode Rules menu includes the following elements:
				23.4.2.1. A back button (ic_back.xml) that returns the user to the settings window with a slide animation
				23.4.2.2. A header string "MODE SELECTION" centered at the top of the window
				23.4.2.3. A close button (ic_close_xml) at the top right of the window that closes the Mode Selection window AND the Settings window
					23.4.2.3.1. If a user taps the screen outside of the Mode Selection window, both the Mode Selection and Settings windows close
				23.4.2.4. A rule (line) that separates the header from the menu buttons.
					23.4.2.4.1. Its width is the width of the window minus 10 px on each side
					23.4.2.4.2. The rule does not connect with the window border
				23.4.2.5. A "green" volume row that includes the following:
					23.4.2.5.1. A bright green circle on the far left
					23.4.2.5.2. A text field to the right of the green circle
						23.4.2.5.2.1. the default value is 59
						23.4.2.5.2.2. If a user taps on the text field:
							23.4.2.5.2.2.1. a cursor appears after the number
							23.4.2.5.2.2.2. the system numberpad opens
						23.4.2.5.2.3. If a user taps enter on the numberpad or tabs outside of the text field in the menu window:
							23.4.2.5.2.3.1. the cursor is removed
							23.4.2.5.2.3.2. the system numberpad closes
					23.4.2.5.3. A string to the right of the text field that says "dB or less"
					23.4.2.5.4. A drop-down menu with the selected animation and a drop-down arrow on the far right.
						23.4.2.5.4.1. When a user taps the menu or the arrow:
							23.4.2.5.4.1.1. The arrow rotates in a smooth animation to face upuward
							23.4.2.5.4.1.2. A drop-down menu opens with a smooth animation
							23.4.2.5.4.1.3. A menu displays animation options
								23.4.5.4.1.3.1. The current animation shows in the original drop-down menu field
								23.4.5.4.1.3.2. The remaining animation options are listed in alphanumeric order
							23.4.2.5.4.1.4. Animation options are:
								23.4.2.5.4.1.4.1. Angry
								23.4.2.5.4.1.4.2. Cower
								23.4.2.5.4.1.4.3. Cry
								23.4.2.5.4.1.4.4. Ear plugs
								23.4.2.5.4.1.4.5. Happy
								23.4.2.5.4.1.4.6. Sleep
						23.4.2.5.4.2. The default animation for green is "Sleep"
				23.4.2.6. A "yellow" volume row that includes the following:
					23.4.2.6.1. A bright yellow circle on the far left
					23.4.2.6.2. A text field to the right of the yellow circle
						23.4.2.6.2.1 the default value is 60
						23.4.2.6.2.2. If a user taps on the text field:
							23.4.2.6.2.2.1. a cursor appears after the number
							23.4.2.6.2.2.2. the system numberpad opens
						23.4.2.6.2.3. If a user taps enter on the numberpad or tabs outside of the text field in the menu window:
							23.4.2.6.2.3.1. the cursor is removed
							23.4.2.6.2.3.2. the system numberpad closes
					23.4.2.6.3. A string to the right of the text field that says "dB" followed by an en dash.
					23.4.2.6.4. A second text field with the same behavior as the first
						23.4.2.6.4.1. the default value is 79
					23.4.2.6.5. A drop-down menu with the selected animation and a drop-down arrow on the far right.
						23.4.2.6.5.1. When a user taps the menu or the arrow:
							23.4.2.6.5.1.1. The arrow rotates in a smooth animation to face upuward
							23.4.2.6.5.1.2. A drop-down menu opens with a smooth animation
							23.4.2.6.5.1.3. A menu displays animation options
								23.4.2.6.5.1.3.1. The current animation shows in the original drop-down menu field
								23.4.2.6.5.1.3.2. The remaining animation options are listed in alphanumeric order
							23.4.2.6.5.1.4. Animation options are the same as for green
						23.4.2.6.5.2. The default animation for yellow is "ear plugs"
				23.4.2.7. A "red" volumem row that includes the following:
					23.4.2.7.1. A bright red circle on the far left
					23.4.2.7.2. A text field to the right of the red circle
						23.4.2.7.2.1. the default value is 80
						23.4.2.7.2.2. If a user taps on the text field:
							23.4.2.7.2.2.1. a cursor appears after the number
							23.4.2.7.2.2.2. the system numberpad opens
						23.4.2.7.2.3. If a user taps enter on the numberpad or tabs outside of the text field in the menu window:
							23.4.2.7.2.3.1. the cursor is removed
							23.4.2.7.2.3.2. the system numberpad closes
					23.4.2.7.3. A string to the right of the text field that says "dB or more"
					23.4.2.7.4. A drop-down menu with the selected animation and a drop-down arrow on the far right.
						23.4.2.7.4.1. When a user taps the menu or the arrow:
							23.4.2.7.4.1.1. The arrow rotates in a smooth animation to face upuward
							23.4.2.7.4.1.2. A drop-down menu opens with a smooth animation
							23.4.2.7.4.1.3. A menu displays animation options
								23.4.7.4.1.3.1. The current animation shows in the original drop-down menu field
								23.4.7.4.1.3.2. The remaining animation options are listed in alphanumeric order
							23.4.2.7.4.1.4. Animation options are the same as for green
						23.4.2.7.4.2. The default animation for red is "crying"

##### PET MANAGER
		23.4.3. Pet Manager
			23.4.3.1. To the right of the string is an edit button

##### REWARDS MANAGER
		23.4.4. Rewards Manager
			23.4.4.1. To the right of the string is an edit button

##### MUSIC MANAGER
		23.4.5. Music Manaager
			23.4.5.1. To the right of the string is an edit button

##### ALARM
		23.4.6. Alarm

##### MARATHON (On/Off)
		23.4.7. Marathon
			23.4.7.1. To the right of the string is an On/Off toggle
				23.4.7.2. The strings "On" and "Off" are included within the toggle
				23.4.7.3. The background color for the On toggle is 2196F3
			23.4.7.2. To the right of the toggle is a discreet box that is not part of the Marathon button
				23.4.7.2.1. The box includes an information icon (ic_info.xml)
					23.4.7.2.1.1. The icon color is always 2196F3
					23.4.7.2.1.2. Icon thickness should be bolder than other icons
				23.4.7.2.2. Tapping the info button opens a snackbar with the string "When Marathon is on, pet animations will continue until the screen is tapped."
					23.4.7.2.2.1. Tapping outside the snackbar closes the snackbar
					23.4.7.2.2.2. If the user taps the Marathon button while the snackbar is open, the Marathon toggle changes state


### PET SPACE

#### REWARDS MODE FUNCTIONALITY


#### RESPONSIVE MODE FUNCTIONALITY



### ACTION BUTTONS



## ACCESSIBLE DESIGN AND NAVIGATION
x. Coloring must meet WCAG 2.2 AA contrast standards
x. Users may use a connected keyboard or switch to navigate the app interface
	x.1. When navigating with a connected device, a focus box appears around the currently selected text, image, or button
		x.1.1. Focus box color is 
	x.2. Focus box moves in a logical order, left to right, top to bottom
		x.2.1. A focus box should not jump around the screen but follow an easily discernable pattern
	x.3. Reference purramid_accessible_navigation.xml for key-specific requirements

